<!DOCTYPE html>
<html lang="en-us">
<head>
	<title>Migrate your local PHP 7.2 setup to Homebrew v1.5.*&middot; Andy Grunwald</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Andy Grunwald">
	<meta name="description" content="Andy Grunwald - Software Engineer from Germany">
	<meta name="keywords" content="backend,infrastructure,operations,devops,web development,web engineering">
	<meta name="generator" content="Hugo 0.38.2" />

	<!-- CSS -->
	<link rel="stylesheet" href="https://andygrunwald.com/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="https://andygrunwald.com/favicon.ico" type="image/x-icon">

	

	<!-- Font Awesome -->
	<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
</head>

<body>
	<header class="site-header">
	<div class="branding">
		<a href="https://andygrunwald.com/">
		<img class="avatar" src="https://andygrunwald.com/img/avatar.jpeg" alt="avatar"/>
		</a>
		<h1 class="site-title">
			<a href="https://andygrunwald.com/">Andy Grunwald</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			<li><a href="/"> Blog </a></li><li><a href="/public-speaking/"> Public speaking </a></li><li><a href="/about/"> About </a></li>

			

<li class="icon">
	<a href="https://andygrunwald.com/index.xml" title="Subcribe">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>

<li class="icon">
	<a href="mailto:andygrunwald@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>











<li class="icon">
	<a href="https://github.com/andygrunwald" title="Github">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>





<li class="icon">
	<a href="https://www.linkedin.com/in/andy-grunwald-09aa265a" title="Linkedin">
		<i class="fa fa-fw fa-linkedin"></i>
	</a>
</li>













<li class="icon">
	<a href="https://twitter.com/andygrunwald" title="Twitter">
		<i class="fa fa-fw fa-twitter"></i>
	</a>
</li>









<li class="icon">
	<a href="https://meetup.com/Web-Engineering-Duesseldorf/" title="">
		<i class="fa fa-fw fa-meetup"></i>
	</a>
</li>
		</ul>
	</nav>
</header>


	<div class="content">
	<article>
		<header>
			<h1 class="title">Migrate your local PHP 7.2 setup to Homebrew v1.5.*</h1>
			
				<p class="meta">
	April 10, 2018 &middot; 2 minute read

	
		&middot; Tags:
			<a href="https://andygrunwald.com/tags/environment">environment</a>
			, <a href="https://andygrunwald.com/tags/homebrew">homebrew</a>
			, <a href="https://andygrunwald.com/tags/macos">macOS</a>
			, <a href="https://andygrunwald.com/tags/php">php</a>
			
</p>

			
		</header>

		<section class="post-content">
			

<p>Last week, <a href="https://twitter.com/hanspuac">Hans Puac</a>, a colleague of mine, wrote a small guide into our internal company chat on how to migrate your local PHP environment on macOS to the new Homebrew version 1.5.*.
The guide helped a lot of other engineers inside <a href="https://www.trivago.com/">trivago</a>.
I thought it might help more people from the internet.
I asked Hans if I am allowed to share it, and he approved.
So kudos belongs to him.
Here we go:</p>

<p>With Homebrew 1.5.0 the tap <code>homebrew/php</code> got deprecated.
They migrated it to <code>homebrew/core</code>, but this is changing the installation process completely.
If you want to migrate:</p>

<h2 id="1-cleanup">1. Cleanup</h2>

<p>Remove your currently installed php-packages.
This is not 100% necessary, but I wanted to have it clean.</p>

<p>You can check what packages are installed via <code>brew list | grep php</code> for example and remove via <code>brew remove MYPACKAGE</code>.
Check for leftovers in <code>/usr/local/etc/php/</code> and remove if necessary.
Untap the deprecated repo <code>brew untap homebrew/php</code>.
You can check your taps with <code>brew tap</code>
I also had some other taps that I directly untapped as well because those were deprecated:</p>

<ul>
<li><code>brew untap homebrew/science</code></li>
<li><code>brew untap homebrew/versions</code></li>
</ul>

<h2 id="2-update">2. Update</h2>

<p><code>brew update</code></p>

<h2 id="3-install-php">3. Install PHP</h2>

<p>Install PHP via <code>brew install php@7.2</code></p>

<h2 id="4-install-extensions">4. Install Extensions</h2>

<p>The <code>intl</code> is now already built in.
Install all other required extensions via <a href="https://pecl.php.net/">PECL</a> (gets installed together with PHP).</p>

<p>Installation via pecl requires autoconf (<code>brew install autoconf</code>):</p>

<ul>
<li><code>pecl install xdebug</code></li>
<li><code>pecl install redis</code></li>
<li><code>pecl install apcu</code></li>
<li><code>pecl install memcached</code></li>
<li><code>pecl install imagick</code>
&hellip;</li>
</ul>

<h3 id="particular-version-of-an-extension">Particular version of an extension</h3>

<p>If your app depends on a particular version of an extension, e.g. <a href="https://pecl.php.net/package/redis">redis in v3.1.6</a> specify the version explicitly via <code>pecl install redis-3.1.6</code>.</p>

<h3 id="extension-snmp">Extension <code>snmp</code></h3>

<p>If you rely on the <a href="https://secure.php.net/manual/en/book.snmp.php">SNMP Extension</a>, i have to disappoint you right now.
This extension is, state of now (2018-04-10), not part of this PHP build:</p>

<blockquote>
<p>SNMP was excluded from the build because it crashes Apache.</p>
</blockquote>

<p>Check out the comments of <a href="https://github.com/SMillerDev">SMillerDev</a> in <a href="https://github.com/Homebrew/homebrew-php/issues/4827">php7.1 extension warnings after migration to core and upgrade #4827</a> and <a href="https://github.com/Homebrew/homebrew-php/pull/4798">php71: migrate to homebrew/core #4798</a>.</p>

<h2 id="5-cleanup">5. Cleanup</h2>

<p>To make some disk space free you and remove old versions of packages, execute <code>brew cleanup -s</code>.</p>

<h2 id="resources">Resources</h2>

<ul>
<li><a href="https://brew.sh/2018/01/19/homebrew-1.5.0/">Homebrew 1.5.0 release announcement</a></li>
<li><a href="https://github.com/Homebrew/homebrew-php">Homebrew/homebrew-php @ github</a></li>
<li><a href="https://discourse.brew.sh/t/php-load-and-tap-errors-with-latest-brew/1956/2">PHP load and tap errors with latest brew @ brew discourse</a></li>
</ul>

		</section>
	</article>
	
	
	<div class="comments contribute-link">
		<h3>Bug? Typo? Contribute!</h3>
		<p>Found a bug or a typo in this article? Feel free to create a pull request at <a href="https://github.com/andygrunwald/andygrunwald.github.io/blob/develop/content/post/homebrew-migrate-your-php-setup.md"><em>Migrate your local PHP 7.2 setup to Homebrew v1.5.*</em></a> at GitHub<i class="fa fa-fw fa-github"></i></p>
	</div>
	<div class="comments related-posts">
		
			

		
	</div>
	
	</div>

	<footer class="site-footer">
	<p class="text">&copy; 2018 - Andy Grunwald</p>
</footer>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-64342623-1', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
</script>

</body>
</html>
